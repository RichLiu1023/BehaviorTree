var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},bt;!function(t){t.version="1.1.0";var e=function(){function t(){}return t}();t.BehaviorTree=e}(bt||(bt={}));var bt;!function(t){var e=function(){function e(){this.btMethod={},this.content={}}return e.create=function(){return new t.BlackBoard},e.prototype.clear=function(){this.content={},this.btMethod={}},e}();t.BlackBoard=e}(bt||(bt={}));var bt;!function(t){var e=function(){function t(){this.name="Node",this.hashid=0,this.hashid=t.hashid++}return t.prototype.precondition=function(t){return!this.condition||this.condition.execute(t)},t.prototype.tick=function(t){return this.precondition(t)?this.execute(t):1},t.prototype.execute=function(t){return 1},t.prototype.getAndCreateMethod=function(t){if(t.btMethod[this.hashid])return t.btMethod[this.hashid];var e={index:0};return t?(t.btMethod[this.hashid]=e,t.btMethod[this.hashid]):e},t.prototype.clearMethod=function(t){t.btMethod[this.hashid]&&(t.btMethod[this.hashid]=null)},t.hashid=1,t}();t.BaseNode=e}(bt||(bt={}));var bt;!function(t){var e=function(){function t(){}return t.e1="子节点不存在",t}();t.ErrorCode=e}(bt||(bt={}));var bt;!function(t){var e=function(t){function e(){t.call(this),this.name="Action"}return __extends(e,t),e.prototype.setCondition=function(t){return this.condition=t,this},e}(t.BaseNode);t.Action=e}(bt||(bt={}));var bt;!function(t){var e=function(t){function e(){t.call(this),this.children=[]}return __extends(e,t),e.prototype.setCondition=function(t){return this.condition=t,this},e.prototype.addNote=function(t){return this.children.push(t),this},e.prototype.clearMethod=function(e){t.prototype.clearMethod.call(this,e);for(var n=this.children.length,r=0;r<n;r++){var i=this.children[r];i.clearMethod(e)}},e}(t.BaseNode);t.Composite=e}(bt||(bt={}));var bt;!function(t){var e=function(e){function n(){e.call(this),this.name="Queue"}return __extends(n,e),n.create=function(){return new t.Queue},n.prototype.execute=function(e){var n=this.children.length;if(0==n)throw t.ErrorCode.e1;for(var r=0,i=this.getAndCreateMethod(e),o=i.index;o<n;o++){var c=this.children[o],u=c.tick(e);if(2==u){i.index=o,r=2;break}c.clearMethod(e)}return 2!=r&&(i.index=0),r},n}(t.Composite);t.Queue=e}(bt||(bt={}));var bt;!function(t){var e=function(e){function n(){e.call(this),this.name="Selector"}return __extends(n,e),n.create=function(){return new t.Selector},n.prototype.execute=function(e){var n=this.children.length;if(0==n)throw t.ErrorCode.e1;for(var r=1,i=this.getAndCreateMethod(e),o=i.index;o<n;o++){var c=this.children[o];if(r=c.tick(e),0==r){r=0;break}if(2==r){i.index=o,r=2;break}c.clearMethod(e)}return 2!=r&&(i.index=0),r},n}(t.Composite);t.Selector=e}(bt||(bt={}));var bt;!function(t){var e=function(e){function n(){e.call(this),this.name="Sequences"}return __extends(n,e),n.create=function(){return new t.Sequences},n.prototype.execute=function(e){var n=this.children.length;if(0==n)throw t.ErrorCode.e1;for(var r=0,i=this.getAndCreateMethod(e),o=i.index;o<n;o++){var c=this.children[o];if(r=c.tick(e),2==r){i.index=o,r=2;break}if(1==r){c.clearMethod(e);break}}return 2!=r&&(i.index=0),r},n}(t.Composite);t.Sequences=e}(bt||(bt={}));var bt;!function(t){var e=function(){function t(){this.children=[]}return t.prototype.addCondition=function(t){return this.children.push(t),this},t.prototype.execute=function(t){return!0},t}();t.ConditionComposite=e}(bt||(bt={}));var bt;!function(t){var e=function(){function t(){}return t.prototype.execute=function(t){return!0},t.prototype.setChild=function(t){return this.child=t,this},t}();t.ConditionDecorator=e}(bt||(bt={}));var bt;!function(t){var e=function(e){function n(){e.call(this)}return __extends(n,e),n.create=function(){return new t.ConditionInverter},n.prototype.execute=function(t){return!this.child||!this.child.execute(t)},n}(t.ConditionDecorator);t.ConditionInverter=e}(bt||(bt={}));var bt;!function(t){var e=function(e){function n(){e.call(this)}return __extends(n,e),n.create=function(){return new t.ConditionSelector},n.prototype.execute=function(t){var e=this.children.length;if(0==e)return!0;for(var n=0;n<e;n++){var r=this.children[n],i=r.execute(t);if(i)return!0}return!1},n}(t.ConditionComposite);t.ConditionSelector=e}(bt||(bt={}));var bt;!function(t){var e=function(e){function n(){e.call(this)}return __extends(n,e),n.create=function(){return new t.ConditionSequences},n.prototype.execute=function(t){var e=this.children.length;if(0==e)return!0;for(var n=0;n<e;n++){var r=this.children[n],i=r.execute(t);if(0==i)return!1}return!0},n}(t.ConditionComposite);t.ConditionSequences=e}(bt||(bt={}));var bt;!function(t){var e=function(t){function e(){t.call(this)}return __extends(e,t),e.prototype.setCondition=function(t){return this.condition=t,this},e.prototype.setChild=function(t){return this.child=t,this},e}(t.BaseNode);t.Decorator=e}(bt||(bt={}));var bt;!function(t){var e=function(e){function n(){e.call(this),this.name="Inverter"}return __extends(n,e),n.create=function(){return new t.Inverter},n.prototype.execute=function(e){if(!this.child)throw t.ErrorCode.e1;var n=this.child.tick(e);return 1==n&&(n=0),0==n&&(n=1),n},n}(t.Decorator);t.Inverter=e}(bt||(bt={}));var bt;!function(t){var e=function(e){function n(){e.call(this),this.count=1,this.name="Repeater"}return __extends(n,e),n.create=function(e){var n=new t.Repeater;return n.count=Math.max(1,e||1),n},n.prototype.execute=function(e){if(!this.child)throw t.ErrorCode.e1;var n=this.child.tick(e);if(2==n)return 2;var r=this.getAndCreateMethod(e);return r.curCount++,r.curCount>=this.count?(r.curCount=0,0):2},n.prototype.getAndCreateMethod=function(t){if(t.btMethod[this.hashid])return t.btMethod[this.hashid];var e={curCount:0};return t?(t.btMethod[this.hashid]=e,t.btMethod[this.hashid]):e},n}(t.Decorator);t.Repeater=e}(bt||(bt={}));var bt;!function(t){var e=function(e){function n(){e.call(this),this.name="RepeatUntilFail"}return __extends(n,e),n.create=function(){return new t.RepeatUntilFail},n.prototype.execute=function(e){if(!this.child)throw t.ErrorCode.e1;var n=this.child.tick(e);return 2==n?2:1==n?0:2},n}(t.Decorator);t.RepeatUntilFail=e}(bt||(bt={}));var bt;!function(t){var e=function(e){function n(){e.call(this),this.name="RepeatUntilSuccess"}return __extends(n,e),n.create=function(){return new t.RepeatUntilSuccess},n.prototype.execute=function(e){if(!this.child)throw t.ErrorCode.e1;var n=this.child.tick(e);return 2==n?2:0==n?0:2},n}(t.Decorator);t.RepeatUntilSuccess=e}(bt||(bt={}));var bt;!function(t){var e=function(e){function n(){e.call(this),this.name="Succeeder"}return __extends(n,e),n.create=function(){return new t.Succeeder},n.prototype.execute=function(e){if(!this.child)throw t.ErrorCode.e1;var n=this.child.tick(e);return 2==n?2:0},n}(t.Decorator);t.Succeeder=e}(bt||(bt={}));